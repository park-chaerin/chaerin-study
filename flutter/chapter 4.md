## 04-1 데이터 타입

- 다트 언어에서 모든 변수 : 객체
- int, double 등 모든 변수 객체

### 다트의 타입 클래스

| 라이브러리             | 타입 클래스   | 데이터                     |
|-------------------|----------|-------------------------|
| dart:core library | bool     | true, false             |
| dart:core library | double   | 실수                      |
| dart:core library | int      | 정수                      |
| dart:core library | num      | 숫자(double과 int의 상위 클래스) |
| dart:core library | String   | 문자열                     |
| dart:typed_data   | ByteData | 바이트                     |

### 문자열 표현하기
 - 문자열 데이터를 다룰 때는 String 클래스 사용.
 - 작은따옴표('hello'), 큰따옴표("hello"), 삼중따옴표(' ' 'hello' ' ', " " "hello" " ") 사용.
 - 두 문자열이 같은지 비교할 때는 == 사용.
 - 문자열에 동적인 결과를 포함할 때는 $ 사용. (문자열에 동적인 결과를 포함하는 것 : 문자열 템플릿) 
 - 어떤 변수를 문자열에 포함할 때는 $변수명 , 실행문의 결과를 포함할 때는 ${ } 형태로 작성. <br>
```dart
main() {
  int no = 10;
  String name = 'kkang';
  
  String myFun() {
    return 'kim';
  }
  
  print('no : $no, name : $name, 10 + 20 : ${10 + 20}, myFun() : ${myFun()}');
}
```
> 실행결과 -> no : 10, name : kkang, 10 + 20 : 30, myFun() : kim

### 형 변환하기
- 다트는 모든 변수가 객체이므로 형변환도 자동으로 이뤄지지 않음.
- 다음처럼 함수를 이용해서 형변환을 해줘야 함.
```dart
main() { 
  int n1 = 10;
  double d1 = 10.0;
  String s1 = '10';
  
  double d2 = n1.toDouble();  // 형변환
  int n2 = d1.toInt();  //형변환
  String s2 =n1.toString(); //형변환
  int n3 = int.parse(s1);  //형변환
}
```
## 04-2 상수 변수 - const,final

- 다트에서는 상수가 되는 시점에 따라 컴파일 타임과 런타임 상수 변수로 구분됨.

### 컴파일 타임 상수 변수 : const
- 컴파일 타임 상수 변수는 const 예약어로 선언.
- 톱 레벨이나 함수 내에 지역 변수로 선언할 수 있지만, 클래스에 선언할 때는 static 변수로만 선언 가능.
- const 변수는 선언할 때 초기값을 대입해야 함 (이후 값 바꿀 수 없음 -> 바꾸면 오류)

### 런 타임 상수 변수 : final
- 런 타임 상수 변수는 final 예약어로 선언.
- 톱 레벨, 클래스, 함수 내부에서도 선언 가능.
- const와 마찬가지로 값을 바꿀 수 없음.
- 초기값을 대입하는 시점인 꼭 선언문이 아닐 수 있음.(선언 하고 이후에 초기값을 대입하면 오류 X)
- 앱이 실행될 때 값이 결정되므로, 런 타임 상수 변수.

### 상수 변수와 문자열 템플릿
#### 문자열 템플릿에 상수 변수를 사용할 때 주의점
- const 예약어로 선언한 String 타입 상수 변수에 문자열 템플릿으로 값을 대입할 때는 템플릿 내부에도 컴파일 타임 상수를 사용해야함.
```dart
String s1 = 'hello';
const String s2 = 'world';
final String s3 = 'hihihi';

const String s5 = '$s2'; // const로 선언한 s2를 사용하면 오류 X
const String s6 = '$s1, $s2'; // const로 선언하지 않은 s1 사용해서 오류 O
```

## 04-3 var와 dynamic타입
- 데이터 타입을 유추하거나 모든 타입의 데이터를 대입할 수 있는 변수를 선언할 때 사용.

### 타입 유추 : var
- var 사용 시 타입을 생략. 대입하는 값에 따라 결정됨.
- 선언과 동시에 값을 대입하지 않으면 dynamic 타입으로 선언됨.

### 모든 타입 지원 : dynamic
- dynamic 사용 시 모든 타입의 데이터 대입 가능.

## 04-2 컬렉션 타입 - List, Set, Map

#### 컬렉션 타입?  <br>
  - 한 변수에 여러 데이터를 저장하는 방법. 배열(Array), 리스트(List), 집합(Set), 맵(Map) 등이 존재.
  - 배열, 리스트 : 여러 데이터를 저장하고, 저장된 순서를 나타내는 인덱스값으로 이용한다는 공통점 존재. <br>
-> 다트에서는 배열 = 리스트

### 리스트 타입 (List)
- 데이터를 여러 개 저장하고 인덱스값으로 데이터를 이용하는 컬렉션 타입의 클래스.
- 리스트를 선언하면서 초기화 할 때는 대괄호( [ ] ) 사용. <br>
```
List List1 = [10, 'hello', 'true'
```
- 특정 타입의 데이터만 저장하는 리스트를 선언할 때는 '제네릭'으로 명시. <br>
```
List<int> list2 = [10,20,30]; // 문자열 넣으면 오류 
```

- 리스트에 데이터를 더 추가할 때는 add( ) 사용.
- 리스트에 데이터를 제거할 때는 removeAt( ) 사용.
- filled( ), generate( ) : List클래스에 선언된 생성자. <br>
- 생성자 : 객체를 만들 때 자동으로 실행되는 함.

#### filled( )
- 리스트를 선언할 때 데이터를 몇 개 저장할 지 크기 지정이 가능.
- filled(리스트 크기, 리스트 초기값)  
    ex) filled(3,0) : 데이터 3개 저장가능, 초기값 모두 0
```
 var list3 = List<int>.filled(3,0);  // list3 = [0, 0, 0]
 ```
 - 지정한 크기보다 많은 데이터를 저장하고 싶을 때는 growable 매개변수를 true로 지정. <br>
 ```
 var list3 = List<int>.filled(3, 0, growable: true); 
 ```

#### generate( )
- 리스트를 선언할 때 데이터를 몇 개 저장할 지 크기 지정이 가능.
- generate(리스트 크기, 리스트 초기값)
- filled( )와 차이점 : 초기화할 때 원하는 특정 로직으로 구성된 데이터 지정 가능.
```dart
var List4 = List<int>.generate(3,(index) => index * 10, growable: true);

// list4 : [0, 10, 20]
```
### 집합 타입 (Set)
- 리스트와 마찬가지로 여러 건의 데이터를 저장하는 컬렉션 타입의 클래스. 
- 인덱스값으로 데이터에 접근함.
- 중복 데이터를 허용하지 않음.  -> 리스트와 차이점
- 집합 타입 변수를 선언하면서 초기화할 때는 중괄호 ( { } ) 사용. <br>
```dart
Set<int> set1 = {10,20,10};
print(set1);

//실행결과 : {10, 20}  -> 중복된 10 하나 제거.
```
### 맵 타입 (Map)
- 여러 건의 데이터를 키와 값 형태로 저장하는 타입.
- 맵에 저장되는 데이터는 항상 키를 가져야 하며, 접근할 때는 인덱스가 아닌 키를 이용함.
```
Map<String, String> map1 = {'one':'hello', 'two':'world'};

print(map1['one']);

//실행결과  hello
```
## 04-5 널 포인트 예외 관리하기

### 널 안전성?
- 널 포인트 예외를 프로그램 실행 전 코드를 작성하는 시점에 점검하는 것.
- 널 포인트 예외 (NPE) : 객체가 null을 가리켜서 발생하는 오류.<br>
(컴파일러가 걸러내지 못하고, 프로그램 실행 중 발생)
- 널 안전성을 지원하지 않는 프로그래밍 언어들은 객체에 널값 대입 가능, 널인 객체에 접근하면 NPE 발생.

### 널 허용과 널 불허
- 다트 언어에서 변수는 기본으로 널 불허로 선언됨.
- 널 허용으로 선언하려면 타입 뒤에 물음표 ( ? ) 추가.
```dart
String? str1 = 'null';
```

### 널 불허 변수의 초기화
- 다트에서 모든 변수는 객체이므로, 변수를 선언하면서 초기값을 주지 않으면 자동으로 널로 초기화.
- 널 불허로 선언한 변수는 선언과 동시에 널이 아닌 값으로 초기화 해야함.
```dart
int a1; //오류 O
int? a2; //오류 X
```

### var 타입의 널 안전성
- var로 변수를 선언하면 대입하는 값에 따라 타입 결정.
- 널 허용 여부도 대입하는 값에 따라 텀파일러가 자동 결정. -> var뒤에 물음표 붙일 수 X

### dynamic 타입의 널 안전
- dynamic 타입에는 물음표를 추가할 수 있음. (의미 X)
- 의미 없는 이유 : dynamic 타입에는 모든 타입의 데이터를 선언 가능하기 때문에 null허용도 가능.

### 널 안전성과 형 변환
- 널 허용(Nullable)은 널 불허(NonNull)의 상위 타입(클래스)임.
- 널 불허 변수를 널 허용에 대입할 때는 자동으로 형 변환됨.
- 반대로, 널 허용 변수를 널 불허에 대입할 때는 오류 발생.

### 초기화를 미루는 late 연산자
- 널 불허 변수를 선언하고는 싶지만 초기화하기 모호할 때는 late 사용.
- 변수가 널인 상태로 이용되다가 앱이 실행될 때 값 결정이 가능함. -> 초기화 미루기
```dart
int a1; // 널 불허 변수에 초기값 선언 X -> 오류 발생.
late int a2; // late 사용으로 초기값 선언하지 않아도 오류 발생 X.
```
## 04-6 널 안전성 연산자
- 널에 안전한 코드를 작성할 수 있도록 다트에서 연산자 제공.

### 널인지 점검할 때 : ! 연산자
- 어떤 변수가 널인지 점검할 때 사용.
- 변수 뒤에 ! 연산자 추가 시, 해당 변수값이 널이면 런 타임 오류 발생.
- 널 불허 변수에도 ! 연산자 추가 가능하지만, 의미 없음.
- 함수 호출과 같은 구문에도 사용 가능. 결과가 널이면 런 타임 오류 발생.

### 멤버에 접근할 때 : ?. 또는 ?[ ]연산자
- 널 허용 객체나 리스트 멤버의 접근할 때 사용.
- 객체가 널이 아닐 때만 멤버에 접근함.
- 객체가 널이면 멤버에 접근할 수 없고, null을 반환함.
```dart
main() {
  List<int>? list = [10,20,30]; 
  print('list[0] : ${list?[0]}');
  //결과 = list[0] : 10
  
  list = null;
  print('list[0] : ${list?[0]}');
}
  //결과 = list[0] : null
```
### 값을 대입할 때 : ??= 연산자
- 널 허용 변수에 값만 대입하고 싶을 때 사용.
- 오른쪽의 대입할 값이 널이 아닐 때만 대입하고, 널이면 대입하지 않음.
```dart
main(){
  int? data3;
  data3 ??= 10;
  print('data3 : $data3');
  //결과 = data3 :10
  
  data3 ??=null;
  print('data3 : $data3');
  //결과 = data3 : 10
}
```

### 값을 대체할 때 : ?? 연산자
- 널 허용 변수가 널이고, 대체할 값을 지정하고 싶을 때 사용.
```dart
main(){
  String? data4 = 'hello';      // 널 허용으로 선언.
  String? result = data4 ?? 'world';    
  //data4가 널이 아닐 때는 data4값(hello) 대입, 널일 경우 오른쪽값(world) 대입.
  print('result : $result');  
  // 결과 = result : hello
  
  data4 = null;
  result = data4 ?? 'world';
  print('result : $result');
  //결과 = result : world   -> data4가 널값이기 때문.
}
```